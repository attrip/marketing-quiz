<!DOCTYPE html>
<html lang="ja"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>WP埋め込み版：マーケ戦略ケーススタディ・プロンプトエディター</title>
<style>:root{--ink:#111;--muted:#666;--bg:#fafafa;--pri:#0ea5e9;--ok:#16a34a}*{box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,"Noto Sans JP",sans-serif;line-height:1.6;color:var(--ink);background:#fff;margin:0}.wrap{max-width:860px;margin:8px auto;padding:12px;border:1px solid #eee;border-radius:12px}.grid{display:grid;gap:10px}.g2{grid-template-columns:1fr 1fr}@media (max-width:760px){.g2{grid-template-columns:1fr}}label{font-size:12px;color:var(--muted)}input,textarea{width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:8px;background:#fff;font-size:14px}textarea{min-height:80px}.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}.btn{cursor:pointer;border:0;border-radius:8px;padding:8px 12px;background:var(--pri);color:#fff;font-weight:600}.btn.sec{background:#e5e7eb;color:#111}.btn.ok{background:var(--ok)}.card{border:1px solid #eee;border-radius:10px;padding:10px;background:#fff}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:13px;white-space:pre-wrap}.tiny{font-size:12px;color:var(--muted)}.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#f1f5f9;color:#0f172a;font-size:12px;margin-left:6px}.mt8{margin-top:8px}</style></head>
<body><div class="wrap">
  <div class="grid">
    <div class="card"><div class="row"><strong>マーケ戦略ケーススタディ・プロンプトエディター</strong><span class="pill">WP向け軽量版</span></div>
      <label>【テーマ】</label><input id="theme" placeholder="例: アレルギー対応の高級ジェラート専門店"/>
      <div class="grid g2 mt8"><div><label>状況</label><textarea id="situation"></textarea></div><div><label>課題</label><textarea id="problem"></textarea></div></div>
      <div class="grid g2 mt8"><div><label>条件（黒字化・回収）</label><textarea id="constraint"></textarea></div><div><label>らしさ</label><textarea id="distinct"></textarea></div></div>
      <div class="grid g2 mt8"><div><label>まず狙う人（コア）</label><textarea id="core"></textarea></div><div><label>買いうる人すべて</label><textarea id="broad"></textarea></div></div>
      <div class="grid g2 mt8"><div><label>やること（1文）</label><input id="todo"/></div><div><label>やらないこと（〜3）</label><input id="dont"/></div></div>
      <div class="grid g2 mt8"><div><label>Product</label><textarea id="p_product"></textarea></div><div><label>Price</label><textarea id="p_price"></textarea></div></div>
      <div class="grid g2 mt8"><div><label>Place</label><textarea id="p_place"></textarea></div><div><label>Promotion</label><textarea id="p_promo"></textarea></div></div>
      <div class="grid g2 mt8"><div><label>追加の禁止ワード</label><input id="extra_ban" placeholder="例: ROI, ROAS"/></div><div class="row" style="justify-content:flex-end"><button class="btn" id="generate">生成</button><button class="btn sec" id="copy-problem">問題だけ</button><button class="btn ok" id="copy-all">全部</button></div></div>
      <div class="tiny mt8" id="checks"></div>
    </div>
    <div class="card"><div class="row"><strong>出力</strong><span class="pill">読み取り専用</span></div><pre class="mono" id="output"></pre></div>
  </div>
</div>
<script>(function(){const $=id=>document.getElementById(id);const out=$("output"),checks=$("checks");const defaultBan=["ペネトレーション","アベイラビリティ","UGC","プレファレンス","CEP","リテンション","ファネル","アトリビューション","LTV","CPA","CPC","エンゲージメント","インフルエンサー","バイラル","バズ","ROI","ROAS","CRM"];function s(x){return (x||"").toString().trim()}function list(x){return s(x).split(/[、,\n]/).map(v=>v.trim()).filter(Boolean).slice(0,3)}function foundBan(t,b){const f=[];b.forEach(w=>{if(t.includes(w))f.push(w)});return f}function oneSentence(t){const d=(s(t).match(/[。\.]/g)||[]).length;return d<=1}function hasProfit(t){return /黒字/.test(t)||/回収/.test(t)}function problem(theme,situation,challenge,constraint){const t=s(theme)||"（ここにテーマ）",a=s(situation),c=s(challenge),k=s(constraint);return ["### 【問題】\n",`あなたは「${t}」を立ち上げる責任者です。`,a?`現状は次のとおりです。${a}`:"",c?`いまの課題は、${c}ことです。":"",k?`また、${k}という条件があります。`:"黒字化や投資回収を必ず目標に含めてください。","限られた資源をどう配分し、まず誰に選んでもらい、どう広げるかを考えてください。どんな戦略を取るべきか答えてください。\n"].filter(Boolean).join("\n\n")}function answer(o){const dont=list(o.dont).map(x=>`- ${x}`).join("\n");return ["### 【解答例】\n","#### Objective（目的）",s(o.objective||"（黒字化／回収の目標を明記）"),"\n#### 対象 (Who)","* **コアターゲット（マーケティング資産を集中させるターゲット）:**",s(o.core),"* **戦略ターゲット（買いうる人すべて）:**",s(o.broad),"\n#### 戦略 (What・リソース配分の選択)","* **やること:**",s(o.todo),"* **やらないこと（リソースを割かないこと）:**",dont||"- （なし）","\n#### How（戦術）","* **Product (製品/サービス):**",s(o.product),"* **Price (価格):**",s(o.price),"* **Place (売り場所/買いやすさ):**",s(o.place),"* **Promotion (宣伝/販促):**",s(o.promo)].join("\n")}function gen(){const theme=$("theme").value,situation=$("situation").value,challenge=$("problem").value,constraint=$("constraint").value,distinct=$("distinct").value,core=$("core").value,broad=$("broad").value,todo=$("todo").value,dont=$("dont").value,product=$("p_product").value+(distinct?`\n（らしさ）${distinct}`:""),price=$("p_price").value,place=$("p_place").value,promo=$("p_promo").value+(distinct?`\n（見た目を揃える）${distinct}`:""),extra=list($("extra_ban").value),ban=[...new Set(defaultBan.concat(extra))];const p=problem(theme,situation,challenge,constraint),a=answer({objective:`（目標）${constraint||"黒字化と投資回収を最優先で達成"}`,core,broad,todo,dont,product,price,place,promo});const full=[p,"",a,""].join("\n");const f=foundBan(full,ban),okS=oneSentence(todo),okP=hasProfit(a);const msgs=[];if(f.length)msgs.push(`禁止ワード: ${f.join('、')} を削除してください`);if(!okS)msgs.push("『やること』は1文にしてください");if(!okP)msgs.push("Objectiveに黒字または回収を含めてください");checks.textContent=msgs.length?`⚠️ チェック: ${msgs.join(' ／ ')}`:"✅ チェックOK";out.textContent=full;return {p,full}}$("generate").addEventListener("click",gen);$("copy-problem").addEventListener("click",()=>{const r=gen();navigator.clipboard.writeText(r.p)});$("copy-all").addEventListener("click",()=>{const r=gen();navigator.clipboard.writeText(r.full)});gen()})();</script>
</body></html>

