:root{
  --ink:#111; --muted:#6e6e73; --bg:#f2f2f7; --pri:#007aff; --ok:#34c759;
  --card:#ffffff; --hair:#e5e5ea; --radius:14px; --shadow:0 4px 12px rgba(0,0,0,.06);
  --space-1:6px; --space-2:10px; --space-3:14px; --space-4:18px; --space-5:24px;
}
@media (prefers-color-scheme: dark){
  :root{--ink:#f2f2f7; --muted:#a1a1a6; --bg:#000000; --pri:#0a84ff; --ok:#32d74b; --card:#111113; --hair:#2c2c2e}
}
html[data-theme="dark"]{
  --ink:#f2f2f7; --muted:#a1a1a6; --bg:#000000; --pri:#0a84ff; --ok:#32d74b; --card:#111113; --hair:#2c2c2e;
}
*{box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,"Noto Sans JP",sans-serif;line-height:1.58;color:var(--ink);background:var(--bg);margin:0}
.wrap{max-width:980px;margin:var(--space-5) auto;padding:var(--space-4);background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
h1{font-size:28px;font-weight:700;letter-spacing:-.01em;margin:0 0 var(--space-3)}
.grid{display:grid;gap:12px}
.g2{grid-template-columns:1fr 1fr}
.g3{grid-template-columns:1fr 1fr 1fr}
@media (max-width: 760px){.g2{grid-template-columns:1fr}}
@media (max-width: 760px){.g3{grid-template-columns:1fr}}
.g2{grid-template-columns:1fr 1fr}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
input,textarea,select{width:100%;padding:12px;border:1px solid var(--hair);border-radius:12px;background:#fff;font-size:15px;color:var(--ink);transition:border-color .15s ease, box-shadow .15s ease}
select{appearance:none;background-image:url('data:image/svg+xml;utf8,<svg fill="%236e6e73" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5.5 7l4.5 5 4.5-5z"/></svg>');background-repeat:no-repeat;background-position:right 10px center;background-size:14px}
textarea{min-height:88px}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.aend{justify-content:flex-end}
.btn{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;background:var(--pri);color:#fff;font-weight:600;box-shadow:0 1px 0 rgba(0,0,0,.15);transition:transform .06s ease, filter .15s ease}
.btn:active{transform:translateY(1px)}
.btn.sec{background:#e9e9ed;color:#111;border:1px solid var(--hair)}
.btn.ok{background:var(--ok)}
.card{border:1px solid var(--hair);border-radius:var(--radius);padding:var(--space-3);background:var(--card)}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:13px;white-space:pre-wrap}
.tiny{font-size:12px;color:var(--muted)}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#f1f5f9;color:#0f172a;font-size:12px;margin-left:6px}
.mt8{margin-top:8px}
.alert{color:#b91c1c}
.status-ok{color:#16a34a}
.status-warn{color:#ca8a04}
.status-err{color:#b91c1c}
.actionbar{position:sticky;bottom:0;background:var(--card);padding:8px;border-top:1px solid var(--hair)}
.score{margin-top:8px;border-top:1px dashed #e5e7eb;padding-top:8px;color:#0f172a;font-size:13px}
.missing{outline:2px solid #fbbf24; background: #fff7ed}
.hl{background:#fef08a}
html[data-theme="dark"] .actionbar{background:var(--card);border-top-color:var(--hair)}

/* Focus ring */
input:focus, textarea:focus, select:focus, .btn:focus{outline:none; border-color:var(--pri); box-shadow:0 0 0 3px rgba(0,122,255,.2)}

/* Segmented control */
.seg{display:inline-flex;border:1px solid var(--hair);border-radius:12px;overflow:hidden}
.seg button{border:0;background:#fff;color:#111;padding:8px 12px}
.seg button+button{border-left:1px solid var(--hair)}
.seg button[aria-pressed="true"], .seg button.active{background:#e9f2ff;color:#0a4a9e}

/* iOS-like switch */
.switch{position:relative;display:inline-block;width:46px;height:26px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#d1d1d6;transition:.2s;border-radius:999px}
.slider:before{content:"";position:absolute;height:22px;width:22px;left:2px;top:2px;background:#fff;transition:.2s;border-radius:50%}
.switch input:checked + .slider{background:var(--pri)}
.switch input:checked + .slider:before{transform:translateX(20px)}

/* chips & confetti */
.chips{gap:8px}
.chips .chip{border:1px solid var(--hair);padding:6px 10px;border-radius:999px;background:#fff;color:#111;cursor:pointer}
.chips .chip:hover{background:#f2f2f7}
#confetti{position:relative;height:0}
.confetti-piece{position:fixed;top:-10px;z-index:9999;will-change:transform;animation:fall linear forwards}
@keyframes fall{to{transform:translateY(110vh) rotate(720deg);opacity:.9}}
